webpackJsonp([17],{bDDC:function(t,e){},pAON:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("8+FI"),i={data:()=>({performance:[],AnswerSheetID:[],pages:1,loading:!1,activeName:"first",ArrayList:[],ArrayList1:[],exsicon:[],layered:[],head2:[],userInfo:[],school:[],Gradedata:[],Classdata:[],subjectdata:[],paging:!0}),created(){this.AnswerSheetID=this.$route.query.AnswerSheetID;var t=JSON.parse(sessionStorage.getItem("subject")),e=JSON.parse(localStorage.getItem("userInfo"));JSON.parse(sessionStorage.getItem("head1"));this.userInfo=e,null==t?(this.loading=!0,this.school=JSON.parse(sessionStorage.getItem("school")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],console.log(this.Classdata),0===this.Classdata?this.grade():this.requst(),console.log(this.school)):(this.loading=!0,this.school=JSON.parse(sessionStorage.getItem("subject")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0===this.Classdata?this.grade():this.requst()),s.a.$on("getParam",t=>{this.head2=t})},watch:{head2(){console.log("数据在变化"),this.school=JSON.parse(sessionStorage.getItem("subject")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0==this.Classdata?(this.grade(),console.log("走年级")):(this.requst(),console.log("走班级"))}},methods:{grade(){this.loading=!0,this.performance=[],console.log(this.userInfo.SchoolID,this.school[2],this.AnswerSheetID,this.school[0]),this.$get("teacher/gradeStudentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(t=>{console.log(t.data),0===t.data.list.length?(this.loading=!1,alert("暂无数据，请稍后在尝试")):(this.pages=t.data.pages,t.data.pages>1?this.paging=!1:this.paging=!0,0===t.data.list.length&&(this.loading=!1),t.data.list.forEach((t,e)=>{t.ClassID,"M"===t.Sex?t.Sex="男":t.Sex="女","参考"==t.type&&(t.type=" "),0==t.Score&&(t.type="缺考"),this.performance.push({ClassID:t.ClassID+"班",CreateTime:t.CreateTime,ExamTitle:t.ExamTitle,GradeName:t.GradeName,Sex:t.Sex,StudentName:t.StudentName,SubjectName:t.SubjectName,Type:t.Type,type:t.type,Score:t.Score+"分",StudentID:t.StudentID,Ranking:t.Ranking}),this.exsicon.push(t.SubjectName),this.ArrayList.push(t.Score),this.loading=!1}),this.loading=!1)}),this.$get("/study/layerGradesStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(t=>{this.layered=t.data})},requst(){this.loading=!0,this.performance=[],this.$get("teacher/studentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(t=>{console.log(t.data),this.pages=t.data.pages,0===t.data.list.length&&(this.loading=!1),t.data.pages>1?this.paging=!1:this.paging=!0,t.data.list.forEach((t,e)=>{t.ClassID,"M"===t.Sex?t.Sex="男":t.Sex="女","参考"==t.type&&(t.type=" "),0==t.Score&&(t.type="缺考"),this.performance.push({ClassID:t.ClassID+"班",CreateTime:t.CreateTime,ExamTitle:t.ExamTitle,GradeName:t.GradeName,Sex:t.Sex,StudentName:t.StudentName,SubjectName:t.SubjectName,Type:t.Type,type:t.type,Score:t.Score+"分",StudentID:t.StudentID,Ranking:t.Ranking}),this.exsicon.push(t.SubjectName),this.ArrayList.push(t.Score),this.loading=!1}),this.student()})},handleCurrentChange(t){this.loading=!0,this.performance=[],0==this.Classdata?(console.log(123),console.log(this.userInfo.SchoolID,this.school[1],this.school[2],this.AnswerSheetID,this.school[0],t),this.$get("teacher/gradeStudentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&pageNum="+t).then(t=>{console.log(t.data),t.data.list.forEach((t,e)=>{t.ClassID,"M"===t.Sex?t.Sex="男":t.Sex="女","参考"==t.type&&(t.type=" "),0==t.Score&&(t.type="缺考"),this.performance.push({ClassID:t.ClassID+"班",CreateTime:t.CreateTime,ExamTitle:t.ExamTitle,GradeName:t.GradeName,Sex:t.Sex,StudentName:t.StudentName,SubjectName:t.SubjectName,Type:t.Type,type:t.type,Score:t.Score+"分",StudentID:t.StudentID,Ranking:t.Ranking}),this.loading=!1})})):(console.log(456),this.$get("teacher/studentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&pageNum="+t).then(t=>{t.data.list.forEach((t,e)=>{t.ClassID,"M"===t.Sex?t.Sex="男":t.Sex="女","参考"==t.type&&(t.type=" "),0==t.Score&&(t.type="缺考"),this.performance.push({ClassID:t.ClassID+"班",CreateTime:t.CreateTime,ExamTitle:t.ExamTitle,GradeName:t.GradeName,Sex:t.Sex,StudentName:t.StudentName,SubjectName:t.SubjectName,Type:t.Type,type:t.type,Score:t.Score+"分",StudentID:t.StudentID,Ranking:t.Ranking}),this.loading=!1})}))},handleClick(){},student(){0==this.Classdata?(console.log("年级学生分层"),this.$get("/study/layerGradesStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(t=>{console.log(t.data),this.layered=t.data})):(console.log("班级学生分层"),this.$get("study/layerStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata+"&ClassID="+this.Classdata).then(t=>{console.log(t.data),this.layered=t.data}))},drawLine(){this.$echarts.init(document.getElementById("myChart123")).setOption({title:{text:"折线图堆叠"},tooltip:{trigger:"axis"},legend:{data:["分数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.exsicon},yAxis:{type:"value"},series:[{name:"分数",type:"line",stack:"总量",data:this.ArrayList}]})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transcript"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"成绩表",name:"first"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"正在拼命更新数据",data:t.performance,height:"485",border:""}},[a("el-table-column",{attrs:{prop:"ClassID",label:"班级",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StudentName",label:"姓名",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StudentID",label:"学号",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Score",label:"分数",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Ranking",label:"排名",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"缺考",width:"171"}})],1),t._v(" "),a("el-pagination",{staticClass:"pagessize",attrs:{disabled:t.paging,layout:"prev, pager, next","page-count":t.pages},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"学生分层",name:"third"}},[a("div",{staticClass:"clearfix"},[a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%",height:"475px"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[t._v("优秀")]),t._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[t._v(t._s(t.layered.good))]),t._v("人\r\n                    ")])]),t._v(" "),a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[t._v("中等")]),t._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[t._v(t._s(t.layered.poor))]),t._v("人\r\n                    ")])]),t._v(" "),a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[t._v("较差")]),t._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[t._v(t._s(t.layered.second))]),t._v("人\r\n                    ")])])])])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,o,!1,function(t){a("bDDC")},null,null);e.default=l.exports}});