webpackJsonp([15],{QSJd:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("8+FI"),o={components:{},data:()=>({form:{tiny:"",CreateTime:"",StudentName:"",Sex:"",GradeID:"",ClassID:"",Score:"",Ranking:"",file:[]},grade:[],loading:!1,GradeID:"",ClassID:"请选择",SubjectID:"",category1:[],category2:[],category3:[],score:[],haha:[],category2show:!1,category3show:!1,divshow:!0,activeName:"first",tableData:[],cur_page:1,pages:0,SchoolID:"",ClassID:"",false:!0,tableData1:[],paramData:[],head2:[],head3:[],dis:!1,queryParams:[],userInfo:[],head4:[],ClassID:[],paging:[],Pagingjudgment:[]}),created(){this.Classrequest();var e=JSON.parse(sessionStorage.getItem("classandgrade"));this.head4=e,s.a.$on("getParam",e=>{this.head2=e}),console.log(this.Pagingjudgment)},watch:{head2(){1===this.head4?(console.log("无班级"),this.Gradesubjects(),this.Pagingjudgment=50):(console.log("有班级"),this.Classsubjects(),this.Pagingjudgment=50),console.log(this.Pagingjudgment)}},methods:{Classrequest(){var e=JSON.parse(localStorage.getItem("userInfo"));this.userInfo=e;var a=JSON.parse(sessionStorage.getItem("GradeID"));if(this.queryParams=a,this.queryParams){this.paging=[],this.loading=!0,console.log(this.queryParams),console.log("请求最新详情的年级id学科id");var t=JSON.parse(sessionStorage.getItem("subject"));null===t?(console.log("用户没有点击"),this.$get("teacher/gradeStudyInfo?SchoolID="+e.SchoolID+"&GradeID="+this.queryParams[0]+"&SubjectID="+this.queryParams[1]+"&AnswerSheetID="+this.queryParams[2]).then(e=>{console.log(e.data),0===e.data.list.length?(this.loading=!1,this.open5()):(this.loading=!1,e.data.list.forEach((e,a)=>{"M"===e.Sex?e.Sex="男":e.Sex="女","0"==e.Type?e.Type="考试":e.Type="练习",this.tableData.push(e)}))})):(console.log("用户点击啦"),this.$get("/teacher/gradeStudyInfoMassion?SchoolID="+e.SchoolID+"&GradeID="+t[0]+"&SubjectID="+t[1]).then(e=>{this.pages=e.data.navigatePages,console.log(this.paging),0===e.data.list.length?this.loading=!1:(this.paging=e.data.list[0].SubjectID,e.data.list.forEach((e,a)=>{"M"===e.Sex?e.Sex="男":e.Sex="女","0"==e.Type?e.Type="考试":e.Type="练习",this.tableData.push(e)}),this.loading=!1)}))}else console.log("没有最新学期"),this.open5()},Gradesubjects(){this.paging=[],this.tableData=[],this.loading=!0,this.$get("/teacher/gradeStudyInfoMassion?SchoolID="+this.userInfo.SchoolID+"&GradeID="+this.head2[0]+"&SubjectID="+this.head2[1]).then(e=>{console.log(e.data),this.pages=e.data.navigatePages,console.log(this.paging),0===e.data.list.length?this.loading=!1:(this.paging=e.data.list[0].SubjectID,e.data.list.forEach((e,a)=>{"M"===e.Sex?e.Sex="男":e.Sex="女","0"==e.Type?e.Type="考试":e.Type="练习",this.tableData.push(e)}),this.loading=!1)})},Classsubjects(){this.paging=[],this.tableData=[],this.loading=!0,this.$get("teacher/studentInfoMassions?SchoolID=21001&ClassID=6&SubjectID=5").then(e=>{this.pages=e.data.pageSize,this.paging=e.data.list[0].SubjectID,0===e.data.list.length?this.loading=!1:(e.data.list.forEach((e,a)=>{"M"===e.Sex?e.Sex="男":e.Sex="女",this.tableData.push(e)}),this.loading=!1)})},open7(){this.$message({showClose:!0,message:"警告,这个老师没有班级",type:"warning"})},open6(){this.$message({showClose:!0,message:"没有查询到班级里的学生",type:"warning"})},open5(){this.$message({showClose:!0,message:"无法根据最新详情获取成绩单",type:"warning"})},handleCurrentChange(e){console.log(e),this.tableData=[],this.loading=!0;var a=JSON.parse(localStorage.getItem("userInfo"));this.userInfo=a,0===this.Pagingjudgment.length?(console.log("刚进入页面时的请求"),this.$get("teacher/gradeStudyInfoMassion?SchoolID=99&GradeID=12&SubjectID=5&pageNum="+e).then(e=>{console.log(e.data),0===e.code?e.data.list.forEach((e,a)=>{"F"==e.Sex?e.Sex="男":e.Sex="女",this.tableData.push(e)}):this.$message.error("学生加载失败"),this.loading=!1}).catch(()=>{this.loading=!1})):(console.log("被点击触发的请求"),this.$get("/teacher/gradeStudyInfoMassion?SchoolID="+this.userInfo.SchoolID+"&GradeID="+this.head2[0]+"&SubjectID="+this.head2[1]+"&pageNum="+e).then(e=>{console.log(e.data),this.pages=e.data.navigatePages,this.paging=e.data.list[0].SubjectID,console.log(this.paging),0===e.data.list.length?this.loading=!1:(e.data.list.forEach((e,a)=>{"M"===e.Sex?e.Sex="男":e.Sex="女",this.tableData.push(e)}),this.loading=!1)}))},handleClick(e,a){}}},l={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"成绩单",name:"first"}},[t("el-form",{ref:"form",staticClass:"item-add-list",attrs:{model:e.form,enctype:"multipart/form-data"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.divshow,expression:"divshow"}],staticStyle:{height:"100%","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"正在拼命更新数据",data:e.tableData}},[t("el-table-column",{attrs:{prop:"CreateTime",label:"考试日期",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{prop:"GradeName",label:"年级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"SubjectName",label:"科目"}}),e._v(" "),t("el-table-column",{attrs:{prop:"StudentName",label:"姓名",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Sex",label:"性别"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Score",label:"分数"}}),e._v(" "),t("el-table-column",{attrs:{prop:"StudentID",label:"学号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"考试状态"}}),e._v(" "),t("el-table-column",{attrs:{prop:"Type",label:"考试类型"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("router-link",{staticStyle:{color:"#35a000"},attrs:{to:{path:"studyInfo",query:{SchoolID:e.userInfo.SchoolID,StudentID:a.row.StudentID}}}},[e._v("学情报告")])]}}])})],1),e._v(" "),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{layout:"prev, pager, next","page-count":e.pages},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var i=t("VU/8")(o,l,!1,function(e){t("dR1v")},null,null);a.default=i.exports},dR1v:function(e,a){}});