webpackJsonp([9],{"7XkN":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("8+FI"),i={name:"teacher",data:()=>({ArrayList:[],head123:!0,activeName:"first",ArrayList1:[],ArrayList2:[],tableData:[],cur_page:1,pages:1,s_school:"",s_grade:"",s_klass:"",s_name:"",loading:!1,paging:!1,AnswerSheetID:"",AnswerSheetID123:[],head2:[],userInfo:[],subject:[],exsicon:[],gridData:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",Classtodownload:[],Scoretodownload1:[],school:[],Gradedata:[],Classdata:[],subjectdata:[]}),computed:{},mounted(){this.drawLine()},created(){var t=JSON.parse(sessionStorage.getItem("subject")),e=JSON.parse(localStorage.getItem("userInfo"));this.userInfo=e,1==JSON.parse(sessionStorage.getItem("head1"))&&(this.download=!0),s.a.$on("getParam",t=>{this.head2=t}),null==t?(this.school=[],this.school=JSON.parse(sessionStorage.getItem("school")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0===this.school[2]?(this.grade(),this.head123=!0):(this.search(),this.head123=!1)):(this.school=JSON.parse(sessionStorage.getItem("subject")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0===this.school[2]?(this.grade(),this.head123=!0):(this.search(),this.head123=!1))},watch:{head2(){this.Gradedata=this.head2[0],this.subjectdata=this.head2[1],this.Classdata=this.head2[2],console.log(this.Classdata),0===this.Classdata?(console.log("走年级"),this.grade(),this.head123=!0):(console.log("走班级"),this.search(),this.head123=!1)}},methods:{drawLine(){this.$echarts.init(document.getElementById("myChart123")).setOption({title:{text:"折线图堆叠"},tooltip:{trigger:"axis"},legend:{data:["最高分","最低分"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.exsicon},yAxis:{type:"value"},series:[{name:"最低分",type:"line",stack:"总量",data:this.ArrayList},{name:"最高分",type:"line",stack:"总量",data:this.ArrayList1}]})},Scoretodownload(t){this.Scoretodownload1=t},biubiu(t){},grade(){this.loading=!0,this.tableData=[],this.ArrayList=[],this.ArrayList1=[],this.exsicon=[],this.$get("/study/answerGrade?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&GradeID="+this.Gradedata).then(t=>{console.log(t.data),0===t.data.length?this.paging=!0:1===t.data.pages?this.paging=!0:this.pages=t.data.pages,0===t.data.length?(this.loading=!1,this.open7()):(t.data.list.forEach((t,e)=>{console.log(t),this.tableData.push(t),this.ArrayList.push(t.avgScore),this.ArrayList1.push(t.maxScore),this.exsicon.push(t.CreateTime+"/"+t.SubjectName),this.drawLine()}),this.loading=!1)})},handleClick(t,e){},examine(t){this.$router.push({path:"Transcript",query:{AnswerSheetID:t}})},handleCurrentChange(t){this.loading=!0;var e=JSON.parse(localStorage.getItem("userInfo"));this.$get("teacher/answerSheetInfo?SchoolID="+e.SchoolID+"&UserID="+e.UserID,{pageNum:t}).then(t=>{1===t.data.pages?this.paging=!0:this.pages=t.data.pages,0===t.code?(this.pages=t.data.pages,this.tableData=JSON.parse(JSON.stringify(t.data.list))):this.$message.error("学生加载失败"),this.loading=!1}).catch(()=>{this.loading=!1})},open7(){this.$message({showClose:!0,message:"该老师无法获取到往期学情",type:"warning"})},search(){this.loading=!0,this.tableData=[],this.ArrayList=[],this.ArrayList1=[],this.exsicon=[],this.$get("study/answer?SchoolID="+this.userInfo.SchoolID+"&UserID="+this.userInfo.UserID+"&SubjectID="+this.subjectdata+"&GradeID="+this.Gradedata+"&ClassID="+this.Classdata).then(t=>{0===t.data.length?this.paging=!0:1===t.data.pages?this.paging=!0:this.pages=t.data.pages,0===t.data.length?(this.loading=!1,this.open7()):(t.data.list.forEach((t,e)=>{this.tableData.push(t),this.ArrayList.push(t.avgScore),this.ArrayList1.push(t.maxScore),this.exsicon.push(t.CreateTime+"/"+t.SubjectName),this.drawLine()}),this.loading=!1)})},search1(){var t=JSON.parse(localStorage.getItem("userInfo"));this.$get("teacher/subjectAnswerSheetInfo?SchoolID="+t.SchoolID+"&UserID="+t.UserID+"&SubjectID="+this.subjectdata+"&GradeID="+this.Gradedata).then(t=>{0===t.code?(0==t.data.list&&this.open7(),this.tableData=JSON.parse(JSON.stringify(t.data.list)),this.pages=t.data.pages):this.$message.error("学生加载失败")})},dialogTableVisible123(t){},headdownload:t=>0!=t}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table paperList1",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"正在拼命更新数据"}},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"往期学情",name:"first"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"container-title"},[t._v("往期学情")]),t._v(" "),a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,border:"",size:"medium"}},[a("el-table-column",{attrs:{prop:"AnswerSheetID",label:"ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"SubjectName",label:"科目",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ExamTitle",label:"试卷名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"avgScore",label:"平均分",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"maxScore",label:"最高分",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateTime",label:"考试时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",round:"",size:"medium"},on:{click:function(a){t.examine(e.row.AnswerSheetID)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t查看基本成绩\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("hr"),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.headdownload(e.row.maxScore),expression:"headdownload(scope.row.maxScore) "}],staticClass:"el-icon-download",attrs:{type:"success",round:"",size:"medium"},on:{click:function(a){t.dialogTableVisible123(e.row.AnswerSheetID)}}},[t.head123?a("a",{staticStyle:{color:"#fff"},attrs:{href:"https://pro.myworldclassroom.com/kaokao/index.php/study/studyExcel?SchoolID="+t.userInfo.SchoolID+"&AnswerSheetID="+e.row.AnswerSheetID+"&SubjectID="+t.subjectdata+"&GradeID="+t.Gradedata}},[t._v("得分详情下载")]):a("a",{staticStyle:{color:"#fff"},attrs:{href:"https://pro.myworldclassroom.com/kaokao/index.php/study/studyInfoExcel?SchoolID="+t.userInfo.SchoolID+"&AnswerSheetID="+e.row.AnswerSheetID+"&ClassID="+t.Classdata+"&SubjectID="+t.subjectdata+"&GradeID="+t.Gradedata}},[t._v("得分详情下载")])]),t._v(" "),a("hr")]}}])})],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{disabled:t.paging,layout:"prev, pager, next","page-count":t.pages},on:{"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"趋势图",name:"second"}},[a("div",{staticStyle:{width:"700px",height:"500px"},attrs:{id:"myChart123"}})])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("beq5")},null,null);e.default=r.exports},beq5:function(t,e){}});