webpackJsonp([5],{"6HQa":function(e,t){},Qvg5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("8+FI"),i={components:{},data:()=>({head123:!0,tableData:[],userInfo:"",avgScore:"",maxScore:"",layered:"",ExamTitle:"",arr:[],paging:!1,head2:[],AnswerSheetID:[],SubjectID:[],loading:!1,activeName:"box1",activeName123:"biubiu",GradeID:[],performance:[],pages:0,gridData:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",Classtodownload:[],subject:[],school:[],exs:[],ArrayList:[],ArrayList1:[],Gradedata:[],Classdata:[],subjectdata:[]}),created(){JSON.parse(sessionStorage.getItem("subject"));var e=JSON.parse(localStorage.getItem("userInfo"));this.userInfo=e,this.Firstrequest(),s.a.$on("demo",e=>{this.newest()}),s.a.$on("getParam",e=>{this.head2=e}),s.a.$emit("GradeID",this.GradeID)},watch:{head2(){this.school=JSON.parse(sessionStorage.getItem("subject")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0==this.Classdata?(console.log("走年级通道了"),this.ha2(),this.head123=!0):(console.log("走班级通道啦"),this.ha1(),this.head123=!1)}},mounted(){this.drawLine()},methods:{drawLine(){this.$echarts.init(document.getElementById("myChart")).setOption({legend:{},tooltip:{},dataset:{source:[["product","平均分","最高分"],this.ArrayList,this.ArrayList1]},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"}]})},handleClick(){},Firstrequest(){this.tableData=[],this.loading=!0,this.$get("/study/newestGradeStudy?SchoolID="+this.userInfo.SchoolID+"&UserID="+this.userInfo.UserID).then(e=>{if(0===e.data.length)this.loading=!1;else{var t=[];this.AnswerSheetID=e.data[0].AnswerSheetID,e.data.forEach((e,a)=>{"0"==e.Type?e.Type="考试":e.Type="作业",this.tableData.push(e),this.exs.push(e.SubjectName),this.exs.push("年级"),this.ArrayList.push("班级",e.avgScore,e.maxScore),t.push(e.GradeID,e.SubjectID),this.drawLine()}),s.a.$emit("threelevel",t)}})},newest(){this.loading=!0;var e=JSON.parse(sessionStorage.getItem("head1"));console.log(e),this.head123=null!==e,this.school=JSON.parse(sessionStorage.getItem("school")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0==this.Classdata?(console.log("走年级"),this.school=JSON.parse(sessionStorage.getItem("school")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],console.log(this.AnswerSheetID,this.userInfo.SchoolID,this.Gradedata,this.subjectdata),this.performance=[],this.$get("/teacher/gradeStudentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(e=>{console.log(e.data),0===e.data.list.length?(this.loading=!1,this.paging=!0):(e.data.pages>1&&e.data.pages>0?(this.paging=!1,this.pages=e.data.pages):(this.paging=!0,this.pages=e.data.pages),e.data.list.forEach((e,t)=>{e.ClassID,"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=" "),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}),this.loading=!1)}),this.ArrayList1=[],this.$get("study/classScore?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.ArrayList1.push("年级",e.data.avgScore,e.data.maxScore),this.drawLine()}),this.$get("study/layerGradesStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.layered=e.data})):(this.tableData=[],this.$get("/study/newestStudy?SchoolID="+this.userInfo.SchoolID+"&UserID="+this.userInfo.UserID+"&ClassID="+this.Classdata).then(e=>{if(console.log(e.data),0===e.data.length)this.loading=!1;else{var t=[];this.AnswerSheetID=e.data[0].AnswerSheetID,e.data.forEach((e,a)=>{"0"==e.Type?e.Type="考试":e.Type="作业",this.tableData.push(e),this.exs.push(e.SubjectName),this.exs.push("年级"),this.ArrayList.push("班级",e.avgScore,e.maxScore),t.push(e.GradeID,e.SubjectID),this.drawLine()})}this.$get("/teacher/studentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(e=>{console.log(e.data),0===e.data.list.length?(this.loading=!1,this.paging=!0):(e.data.pages>1?(this.paging=!1,this.pages=e.data.pages):(this.paging=!0,this.pages=e.data.pages),e.data.list.forEach((e,t)=>{e.ClassID,"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=" "),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}))}),this.$get("/study/layerStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata+"&ClassID="+this.Classdata).then(e=>{this.layered=e.data}),this.$get("/study/classScore?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.ArrayList1.push("年级",e.data.avgScore,e.data.maxScore),this.drawLine(),this.loading=!1})}))},ha2(){this.loading=!0,this.AnswerSheetID=[],this.tableData=[],this.$get("/study/newestGradeStudy?SchoolID="+this.userInfo.SchoolID+"&UserID="+this.userInfo.UserID).then(e=>{0===e.data.length?this.loading=!1:(this.AnswerSheetID=e.data[0].AnswerSheetID,e.data.forEach((e,t)=>{"0"==e.Type?e.Type="考试":e.Type="作业",this.tableData.push(e),this.exs.push(e.SubjectName),this.exs.push("年级"),this.ArrayList.push("班级",e.avgScore,e.maxScore),this.drawLine()})),this.performance=[],this.$get("/teacher/gradeStudentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(e=>{0===e.data.list.length?(this.loading=!1,this.paging=!0):(e.data.pages>1&&e.data.pages>0?(this.paging=!1,this.pages=e.data.pages):(this.paging=!0,this.pages=e.data.pages),e.data.list.forEach((e,t)=>{e.ClassID,"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=" "),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}),this.loading=!1)}),this.ArrayList1=[],this.$get("study/classScore?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.ArrayList1.push("年级",e.data.avgScore,e.data.maxScore),this.drawLine()}),this.$get("study/layerGradesStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.layered=e.data})})},ha1(){this.loading=!0,this.tableData=[],this.ArrayList=[],this.ArrayList1=[],this.AnswerSheetID=[],this.exs=[],this.$get("/study/newestStudy?SchoolID="+this.userInfo.SchoolID+"&UserID="+this.userInfo.UserID+"&ClassID="+this.Classdata).then(e=>{console.log(e.data),0==e.data.length?this.loading=!1:(this.AnswerSheetID=e.data[0].AnswerSheetID,this.avg=JSON.parse(JSON.stringify(e.data[0]))),this.transcript(),this.student(),0==e.data.length?(this.open7(),this.loading=!1):e.data.forEach((e,t)=>{"0"==e.Type?e.Type="考试":e.Type="作业",this.tableData.push(e),this.exs.push(e.SubjectName),this.exs.push("年级"),this.ArrayList.push("班级",e.avgScore,e.maxScore),this.drawLine()})})},transcript(){this.performance=[],this.$get("teacher/studentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata).then(e=>{0===e.data.length?(this.paging=!0,this.loading=!1):0===e.data.list.length?(this.loading=!1,this.paging=!0):(this.pages=e.data.pages,e.data.list.forEach((e,t)=>{e.ClassID,"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=" "),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}),this.loading=!1,this.tendencychart())})},student(){this.$get("study/layerStudent?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata+"&ClassID="+this.Classdata).then(e=>{this.layered=e.data})},tendencychart(){this.ArrayList1=[],this.$get("study/classScore?SchoolID="+this.userInfo.SchoolID+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(e=>{this.ArrayList1.push("年级",e.data.avgScore,e.data.maxScore),this.drawLine()})},handleCurrentChange(e){this.loading=!0,this.performance=[],0===this.Classdata?this.$get("/teacher/gradeStudentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&pageNum="+e).then(e=>{0===e.data.list.length?this.loading=!1:(e.data.list.forEach((e,t)=>{"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=""),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}),this.loading=!1)}):this.$get("teacher/studentInfoMassion?SchoolID="+this.userInfo.SchoolID+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata+"&AnswerSheetID="+this.AnswerSheetID+"&GradeID="+this.Gradedata+"&pageNum="+e).then(e=>{0===e.data.list.length?this.loading=!1:(e.data.list.forEach((e,t)=>{"M"===e.Sex?e.Sex="男":e.Sex="女","参考"==e.type&&(e.type=""),0==e.Score&&(e.type="缺考"),this.performance.push({ClassID:e.ClassID+"班",CreateTime:e.CreateTime,ExamTitle:e.ExamTitle,GradeName:e.GradeName,Sex:e.Sex,StudentName:e.StudentName,SubjectName:e.SubjectName,Type:e.Type,type:e.type,Score:e.Score+"分",StudentID:e.StudentID,Ranking:e.Ranking})}),this.loading=!1)})},open7(){this.$message({showClose:!0,message:"该老师无法获取到最新学情",type:"warning"})},dialogTableVisible123(e){this.gridData=[];JSON.parse(localStorage.getItem("userInfo"));this.dialogTableVisible=!0},biubiu(e){console.log(e),this.Classtodownload=e,this.$confirm("已向服务器端发出下载请求请稍微","提示",{confirmButtonText:"确定",type:"warning",center:!0}).then(()=>{this.$message({type:"success",message:"正在下载中!"})}).catch(()=>{})},headdownload:e=>0!=e}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"正在拼命更新数据",data:e.tableData}}),e._v(" "),a("div",{staticClass:"headboxtop",staticStyle:{height:"100px"}},[e._l(e.tableData,function(t){return a("ul",{key:t.id,staticClass:"headboxcontent1"},[a("li",{staticStyle:{"font-size":"40px",color:"#909399"}},[e._v(e._s(t.Type))]),e._v(" "),a("li",[a("h2",[e._v(e._s(t.ExamTitle))])])])}),e._v(" "),e._l(e.tableData,function(t){return a("ul",{key:t.id,staticClass:"headboxcontent"},[a("li",[e._v("年级:"+e._s(t.GradeName))]),e._v(" "),a("li",[e._v("日期:"+e._s(t.CreateTime))]),e._v(" "),a("li",[e._v("科目:"+e._s(t.SubjectName))]),e._v(" "),a("li",[e._v("类型:"+e._s(t.Type))]),e._v(" "),a("li",[e._v("平均分:"+e._s(t.avgScore))]),e._v(" "),a("li",[e._v("最高分:"+e._s(t.maxScore))]),e._v(" "),a("li",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.headdownload(t.maxScore),expression:"headdownload(item.maxScore)"}],attrs:{type:"primary",round:""},on:{click:function(a){e.biubiu(t.AnswerSheetID)}}},[e.head123?a("a",{staticStyle:{color:"#fff"},attrs:{href:"https://pro.myworldclassroom.com/kaokao/index.php/study/studyExcel?SchoolID="+e.userInfo.SchoolID+"&AnswerSheetID="+t.AnswerSheetID+"&SubjectID="+e.subjectdata+"&GradeID="+e.Gradedata}},[e._v("年级得分详情下载")]):a("a",{staticStyle:{color:"#fff"},attrs:{href:"https://pro.myworldclassroom.com/kaokao/index.php/study/studyInfoExcel?SchoolID="+e.userInfo.SchoolID+"&AnswerSheetID="+t.AnswerSheetID+"&ClassID="+e.Classdata+"&SubjectID="+e.subjectdata+"&GradeID="+e.Gradedata}},[e._v("班级得分详情下载")])])],1)])})],2),e._v(" "),a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"成绩单",name:"box1"}},[a("el-table",{staticStyle:{width:"1377px"},attrs:{data:e.performance,height:"486",border:""}},[a("el-table-column",{attrs:{prop:"StudentID",label:"学号",width:"275"}}),e._v(" "),a("el-table-column",{attrs:{prop:"StudentName",label:"姓名",width:"275"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Score",label:"分数",width:"275"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Ranking",label:"排名",width:"275"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"缺考",width:"275"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{disabled:e.paging,layout:"prev, pager, next","page-count":e.pages},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"得分趋势图",name:"second"}},[a("div",{staticStyle:{"border-bottom":"2px solid rgba(0, 0, 0, 0.1)"}},[e._v("得分趋势图")]),e._v(" "),a("div",{style:{width:"750px",height:"400px",margin:"0 20%"},attrs:{id:"myChart"}})]),e._v(" "),a("el-tab-pane",{attrs:{label:"学生分层",name:"first"}},[a("div",{staticStyle:{"border-bottom":"2px solid rgba(0, 0, 0, 0.1)"}},[e._v("学生分层")]),e._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)",height:"100%"}},[a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%",height:"475px"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[e._v("优秀")]),e._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[e._v(e._s(e.layered.good))]),e._v("人\n                        ")])]),e._v(" "),a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[e._v("中等")]),e._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[e._v(e._s(e.layered.poor))]),e._v("人\n                        ")])]),e._v(" "),a("div",{staticStyle:{float:"left","margin-top":"20px",width:"33%"}},[a("p",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[e._v("较差")]),e._v(" "),a("div",{staticClass:"sour",staticStyle:{width:"60%",margin:"0 20%","text-align":"center",padding:"20% 0"}},[a("span",{staticStyle:{"font-size":"50px"}},[e._v(e._s(e.layered.second))]),e._v("人\n                        ")])])])])],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(i,h,!1,function(e){a("6HQa")},null,null);t.default=r.exports}});