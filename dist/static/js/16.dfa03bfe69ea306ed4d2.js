webpackJsonp([16],{"8mTl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({tableData:[],gradeId:[],loading:!0,StudentID:[],pages:1,subject:[],information:[],time:[],paging:!1,value:!1,school:[],activeName:"first",subject123:[],userInfo:[],Gradedata:[],Classdata:[],subjectdata:[]}),created(){this.StudentID=this.$route.query.StudentID,this.userInfo=JSON.parse(localStorage.getItem("userInfo")),this.subject123=JSON.parse(sessionStorage.getItem("subject")),console.log(this.subject123),null==this.subject123?(this.school=JSON.parse(sessionStorage.getItem("school")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],this.grade()):(this.school=JSON.parse(sessionStorage.getItem("subject")),this.Gradedata=this.school[0],this.subjectdata=this.school[1],this.Classdata=this.school[2],0==this.school[1]?this.grade():this.man())},mounted(){},methods:{grade(){console.log(this.userInfo.SchoolID,this.StudentID,this.school[0],this.school[2]),this.$get("study/gradeStudentStudy?SchoolID="+this.userInfo.SchoolID+"&StudentID="+this.StudentID+"&GradeID="+this.Gradedata+"&SubjectID="+this.subjectdata).then(t=>{console.log(t.data),1===t.data.pages?this.paging=!0:this.pages=t.data.pages,0==t.data.list.length?this.loading=!1:(t.data.list.forEach((t,e)=>{"0"==t.Type?t.Type="考试":t.Type="作业",this.tableData.push(t),this.subject.push(t.CreateTime),this.information.push(t.Score),this.time.push(t.StudentName),this.drawLine()}),console.log(this.tableData),this.loading=!1)})},man(){var t=JSON.parse(localStorage.getItem("userInfo"));this.$get("study/studentStudy?SchoolID="+t.SchoolID+"&StudentID="+this.StudentID+"&GradeID="+this.Gradedata+"&ClassID="+this.Classdata+"&SubjectID="+this.subjectdata).then(t=>{console.log(t.data),1===t.data.pages?this.paging=!0:this.pages=t.data.pages,0==t.data.list.length?this.loading=!1:(t.data.list.forEach((t,e)=>{"0"==t.Type?t.Type="考试":t.Type="作业",this.tableData.push(t),this.subject.push(t.CreateTime),this.information.push(t.Score),this.time.push(t.StudentName),this.drawLine()}),console.log(this.tableData),this.loading=!1)})},handleCurrentChange(t){this.tableData=[],this.$get("student/index?SchoolID="+userInfo.SchoolID+"&StudentID="+this.StudentID+"&pageNum="+t).then(t=>{0==t.data.list.length?this.loading=!1:(t.data.list.forEach((t,e)=>{"0"==t.Type?t.Type="考试":t.Type="作业",this.tableData.push(t)}),this.loading=!1)})},drawLine(){this.$echarts.init(document.getElementById("myChart123")).setOption({title:{text:this.time[0]},tooltip:{trigger:"axis"},legend:{data:["分数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.subject},yAxis:{type:"value"},series:[{name:"分数",type:"line",stack:"总量",data:this.information}]})},handleClick(){}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"classmanleft"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"学生成绩",name:"first"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"1200px"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-text":"正在拼命更新数据",data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"CreateTime",label:"日期",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StudentName",label:"姓名",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"年级",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"subjectName",label:"科目",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Type",label:"考试/作业",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ExamTitle",label:"名称",width:"171"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Score",label:"分数",width:"171"}})],1),t._v(" "),a("el-pagination",{attrs:{disabled:t.paging,layout:"prev, pager, next","page-count":t.pages},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"得分趋势图",name:"second"}},[a("div",{staticStyle:{width:"700px",height:"500px"},attrs:{id:"myChart123"}})])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("smyA")},null,null);e.default=l.exports},smyA:function(t,e){}});